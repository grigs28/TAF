# ============================================================================
# 企业级磁带备份系统 - 配置文件模板
# Enterprise Tape Backup System - Configuration Template
# ============================================================================
#
# 使用说明：
# 1. 复制此文件为 .env：cp .env.sample .env  (Linux) 或 copy .env.sample .env (Windows)
# 2. 根据实际环境修改相应参数
# 3. 敏感信息、密码、密钥等请妥善保管
#
# ============================================================================

# ----------------------------------------------------------------------------
# 应用基础配置
# ----------------------------------------------------------------------------
APP_NAME=企业级磁带备份系统
DEBUG=false
ENVIRONMENT=production

# ----------------------------------------------------------------------------
# Web服务配置
# ----------------------------------------------------------------------------
WEB_HOST=0.0.0.0
WEB_PORT=8080
WEB_WORKERS=4
WEB_STATIC_DIR=web/static
WEB_TEMPLATE_DIR=web/templates
MAX_UPLOAD_SIZE=1073741824
ENABLE_CORS=true
CORS_ORIGINS=*

# ----------------------------------------------------------------------------
# 数据库配置（推荐使用openGauss）
# ----------------------------------------------------------------------------
# 推荐使用openGauss作为生产数据库
DATABASE_URL=opengauss://username:password@localhost:5432/backup_db

# 数据库连接参数（可选，与DATABASE_URL二选一）
DB_HOST=localhost
DB_PORT=5432
DB_USER=username
DB_PASSWORD=password
DB_DATABASE=backup_db
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# SQLite配置示例（仅用于开发/测试）
# DATABASE_URL=sqlite:///./data/taf_backup.db

# ----------------------------------------------------------------------------
# 安全配置
# ----------------------------------------------------------------------------
# 建议使用强密钥：python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-jwt-secret-key-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ----------------------------------------------------------------------------
# 磁带设备配置
# ----------------------------------------------------------------------------
# Windows磁带驱动器配置
TAPE_DRIVE_LETTER=o
DEFAULT_BLOCK_SIZE=262144
MAX_VOLUME_SIZE=322122547200

# Linux磁带设备路径（可选）
TAPE_DEVICE_PATH=/dev/nst0

# 磁带管理配置
TAPE_POOL_SIZE=12
TAPE_CHECK_INTERVAL=3600
AUTO_TAPE_CLEANUP=true

# ----------------------------------------------------------------------------
# 压缩配置
# ----------------------------------------------------------------------------
COMPRESSION_LEVEL=9
SOLID_BLOCK_SIZE=67108864
MAX_FILE_SIZE=3221225472
COMPRESSION_THREADS=4

# ----------------------------------------------------------------------------
# 备份配置
# ----------------------------------------------------------------------------
BACKUP_TEMP_DIR=temp/backup
RECOVERY_TEMP_DIR=temp/recovery
DEFAULT_RETENTION_MONTHS=6
AUTO_ERASE_EXPIRED=true

# ----------------------------------------------------------------------------
# 计划任务配置
# ----------------------------------------------------------------------------
SCHEDULER_ENABLED=true
MONTHLY_BACKUP_CRON=0 2 1 * *
RETENTION_CHECK_CRON=0 3 * * *

# ----------------------------------------------------------------------------
# 钉钉通知配置
# ----------------------------------------------------------------------------
DINGTALK_API_URL=http://localhost:5555
DINGTALK_API_KEY=your-dingtalk-api-key
DINGTALK_DEFAULT_PHONE=13800000000

# ----------------------------------------------------------------------------
# 日志配置
# ----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FILE=logs/application.log
LOG_BACKUP_COUNT=30

# ----------------------------------------------------------------------------
# 监控配置
# ----------------------------------------------------------------------------
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=300

# ----------------------------------------------------------------------------
# 高级配置
# ----------------------------------------------------------------------------
ASYNC_POOL_SIZE=20
ASYNC_MAX_OVERFLOW=40
ENABLE_QUERY_CACHE=true
QUERY_CACHE_TTL=300
WEBSOCKET_HEARTBEAT=30
SESSION_TIMEOUT=3600

# 数据目录配置
DATA_DIR=data
SQLITE_DB_FILE=data/taf_backup.db
